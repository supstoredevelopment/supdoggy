import { EventEmitter } from 'events';
import { Socket } from 'net';
import { TLSSocket } from 'tls';
import type { ConnectionOptions } from 'tls';
import { SMTPResponseMonitor } from './response.js';
export declare const AUTH_METHODS: {
    readonly PLAIN: "PLAIN";
    readonly 'CRAM-MD5': "CRAM-MD5";
    readonly LOGIN: "LOGIN";
    readonly XOAUTH2: "XOAUTH2";
};
export declare const SMTPState: {
    readonly NOTCONNECTED: 0;
    readonly CONNECTING: 1;
    readonly CONNECTED: 2;
};
export declare const DEFAULT_TIMEOUT = 5000;
export type SMTPSocketOptions = Omit<ConnectionOptions, 'port' | 'host' | 'path' | 'socket' | 'timeout' | 'secureContext'>;
export interface SMTPConnectionOptions {
    timeout: number | null;
    user: string;
    password: string;
    domain: string;
    host: string;
    port: number;
    ssl: boolean | SMTPSocketOptions;
    tls: boolean | SMTPSocketOptions;
    authentication: (keyof typeof AUTH_METHODS)[];
    logger: (...args: unknown[]) => void;
}
export interface ConnectOptions {
    ssl?: boolean;
}
export declare class SMTPConnection extends EventEmitter {
    readonly user: () => string;
    readonly password: () => string;
    readonly timeout: number;
    protected readonly log: (...args: unknown[]) => void;
    protected readonly authentication: (keyof typeof AUTH_METHODS)[];
    protected _state: 0 | 1 | 2;
    protected _secure: boolean;
    protected loggedin: boolean;
    protected sock: Socket | TLSSocket | null;
    protected features: {
        [index: string]: string | boolean;
    } | null;
    protected monitor: SMTPResponseMonitor | null;
    protected domain: string;
    protected host: string;
    protected ssl: boolean | SMTPSocketOptions;
    protected tls: boolean | SMTPSocketOptions;
    protected port: number;
    private greylistResponseTracker;
    constructor({ timeout, host, user, password, domain, port, ssl, tls, logger, authentication, }?: Partial<SMTPConnectionOptions>);
    debug(level: 0 | 1): void;
    state(): 0 | 2 | 1;
    authorized(): boolean;
    connect(callback: (err: Error | null | undefined, data?: unknown) => void, port?: number, host?: string, options?: ConnectOptions): void;
    send(str: string, callback: (err: Error | null | undefined, data?: unknown) => void): void;
    command(cmd: string, callback: (err: Error | null | undefined, data?: unknown) => void, codes?: number[] | number): void;
    helo(callback: (err: Error | null | undefined, data?: unknown) => void, domain?: string): void;
    starttls(callback: (err: Error | null | undefined, data?: unknown) => void): void;
    parse_smtp_features(data: string): void;
    ehlo(callback: (err: Error | null | undefined, data?: unknown) => void, domain?: string): void;
    has_extn(opt: string): boolean;
    help(callback: (err: Error | null | undefined, data?: unknown) => void, domain: string): void;
    rset(callback: (err: Error | null | undefined, data?: unknown) => void): void;
    noop(callback: (err: Error | null | undefined, data?: unknown) => void): void;
    mail(callback: (err: Error | null | undefined, data?: unknown) => void, from: string): void;
    rcpt(callback: (err: Error | null | undefined, data?: unknown) => void, to: string): void;
    data(callback: (err: Error | null | undefined, data?: unknown) => void): void;
    data_end(callback: (err: Error | null | undefined, data?: unknown) => void): void;
    message(data: string): void;
    verify(address: string, callback: (err: Error | null | undefined, data?: unknown) => void): void;
    expn(address: string, callback: (err: Error | null | undefined, data?: unknown) => void): void;
    ehlo_or_helo_if_needed(callback: (err: Error | null | undefined, data?: unknown) => void, domain?: string): void;
    login(callback: (err: Error | null | undefined, data?: unknown) => void, user?: string, password?: string, options?: {
        method?: string;
        domain?: string;
    }): void;
    close(force?: boolean): void;
    quit(callback?: (...rest: unknown[]) => void): void;
}
